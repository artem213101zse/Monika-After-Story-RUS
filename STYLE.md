# Стиль кодирования

У нас нет строгих стилистических рекомендаций, но вот несколько традиций, которые нам нравится соблюдать:

### Отступ

**Отступы через четыре пробела.**

### Метки

Имена меток должны быть строчными и разделены подчеркиваниями (`monika_twitter`). 
Если вы используете много меток для связанной подсистемы, добавьте префикс `mas` и название вашей подсистемы (например: `mas_coolfungame_flowstart`). **Исключения из этого правила:** темы/приветствия/прощания Моники, хотя это может измениться в будущем.

Некоторые префиксы зарезервированы:

- `greeting` - используется для обычных приветствий
- `i_greeting` - используется для специальных интерактивных приветствий
- `ch30` - используется для ключевых меток 30 главы
- `monika` - используется для почти всех тем о Монке
- `joke` - используется для системы шуток
- `m_joke` - также используется для системы шуток
- `mas_poem` - используется для системы поэтических игр
- `game` - используется для большинства мини-игр
- `vv` - используется для материалов, связанных с обновлениями
- `v` - также используется для материалов, связанных с обновлениями
- `bye` - используется для прощаний

Может быть и больше, поэтому в общем, будьте внимательны к меткам, которые вы используете.


### Store

В Renpy, stores похожи на namespaces, а исключением того, что вы не можете иметь вложенные. Мы рекомендуем группировать связанные данные, константы и функции в stores, чтобы избежать путаницы с global namespace.

Чтобы создать store:
```python
init python in mas_store_name:
    var1 = 1
    var2 = 2
    ...

# or
define mas_store_name.var1 = 1
define mas_store_name.var2 = 2
```

Чтобы получить доступ к store:
```python
store.mas_store_name.var1 = 1

# or
python:
    import store.mas_store_name as mas_store_name
    mas_store_name.var1 = 1
```

Мы используем несколько различных stores для группировки различных данных. При решении о создании нового store, убедитесь, что он уже не используется. Добавляйте префикс `mas_` к именам ваших store 

`persistent` похож на store, но это специальный, который сохраняется на диск.
**Используйте это только если вам нужно сохранить данные из нескольких сеансов** 
Больше об этом позже...

### Функции

Если функция очень специфична для подпрограммы или потока, подумайте о том , чтобы сделать её в store и импортировать, когда это необходимо. Если функцию можно обобщить для многих случаев использования, создайте её в обычном блоке `init python` (что делает её глобальной). **Префиксируйте глобальные функции с помощью mas**

Для документации подойдут как блочные комментарии (#), так и строки документации ("""). Мы не требуем определенного способа документирования функций, но указание того, что делает функция, её входные и выходные переменные, что она возвращает и какие переменные она предполагает, будет хорошим началом:

```python
def mas_someKindOfFunction(var1, var2, var3=None):
    """
    This function does some kind of thing. Use with caution.

    IN:
        var1 - value of something
        var3 - like the most value of something
            (Default: None)

    OUT:
        var2 - contains modified reference to something

    RETURNS:
        a copy of var2

    ASSUMES:
        persistent.var4 
    """
```
Для имен функций подойдут как camelCase так и lowercase_underscores.

### Persistent

Этот аналог store сохраняет данные на диск и служит для отслеживания данных в renpy.
Поскольку он уже загружен с данными из стоковой игры, **избегайте его использования, если это возможно**. (Т.е.: вместо того, чтобы использовать persistent для проверки, было ли событие увидено, используйте `renpy.seen_label` или `seen_event`.

**Префиксируйте все имена постоянных переменных с помощью `_mas_`.** (В настоящее время мы находимся в процессе преобразования всех созданных значений `persistent` чтобы они были правильно префиксированы)

### Константы

Определяйте константы вместо литералов, когда вы используете их несколько раз. Используйте UPPERCASE_UNDERSCORES для именования.

**Исключение из этого составляют литералы, используемые в screens**. Если экран **не**
вызывается с `nopredict`, то используйте литералы, когда это возможно, так как renpy оптимизирует экраны с литералами.

### Переменные

Пожалуйста, сделайте их описательными. Не обязательно, чтобы они были похожи на Java, просто достаточно, чтобы было легко понять, что это. Использование аббревиатур или акронимов допустимо. Используйте нижний регистр с подчеркиваниями для именования.

### Комментарии

Пожалуйста, пишите комментарии. Хотя Python и так читаем, знание высокоуровневой причины, почему мы что-то делаем, или высокоуровневых последствий выполнения чего-либо полезно.

### Длина строки

Снова, это не строгое правило, но держите их в разумных пределах. Лично я ограничиваю до 80 колонок, но до 120 тоже вполне допустимо.
**Исключение составляют коды Renpy.** Код Renpy не всегда можно разбить на несколько строк.

### Ресурсы (Assets)

Все ресурсы, которые вы используете, должны находиться в папке `mod_assets/`. Если у вас много ресурсов, сгруппируйте их в подпапку.

### 3rd-party Пакеты

Если вы можете обойтись без использования внешнего пакета, то делайте это без внешнего пакета. Исключения должны обсуждаться с командой разработчиков. Если библиотека, которую вы хотите добавить, занимает более одного мегабайта, это почти наверняка **не** будет разрешено.
